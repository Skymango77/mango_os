<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mango Freight | Dashboard</title>
    <link rel="icon" href="mango.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            border-color: rgba(255, 130, 0, 0.5);
            box-shadow: 0 0 15px rgba(255, 130, 0, 0.2);
        }
        /* Mango Vibes Background */
        body::before {
            content: ''; position: fixed; top: -20%; left: -20%; width: 80%; height: 80%;
            background: radial-gradient(circle, rgba(255, 130, 0, 0.15), transparent 70%);
            filter: blur(100px); z-index: -1; pointer-events: none;
        }
        body::after {
            content: ''; position: fixed; bottom: -20%; right: -20%; width: 60%; height: 60%;
            background: radial-gradient(circle, rgba(255, 204, 0, 0.1), transparent 70%);
            filter: blur(80px); z-index: -1; pointer-events: none;
        }
        .btn-elastic { transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .btn-elastic:hover { transform: scale(1.02); }
        .btn-elastic:active { transform: scale(0.95); }
        
        /* Modal Animation */
        @keyframes modalSlideUp {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .modal-animate { animation: modalSlideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        @keyframes checkmark {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="bg-[#0f0f0f] text-white min-h-screen flex items-center justify-center p-4 relative overflow-hidden">
    <div class="w-full max-w-[450px] bg-[#1a1a1a]/90 border-2 border-[#FF8200] rounded-[40px] overflow-hidden shadow-[0_0_30px_rgba(255,130,0,0.5)] backdrop-blur-xl">
        <div class="p-6 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-[#FF8200]/30 to-transparent">
            <div class="flex items-center gap-4">
                <div class="p-2 bg-white/10 rounded-xl border border-white/20 shadow-[0_0_15px_rgba(255,130,0,0.4)]">
                    <img src="/assets/img/mango-s.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/6866/6866546.png'" class="w-12 h-12 object-contain" alt="Mango Logo">
                </div>
                <div>
                    <h1 class="text-white font-black text-2xl tracking-tighter flex items-center gap-1">
                        MANGO <span class="text-[#FF8200]">FREIGHT</span>
                    </h1>
                    <p class="text-[10px] text-[#FFCC00] font-bold uppercase tracking-[0.3em] leading-none">Global Logistics v2.6</p>
                </div>
            </div>
            <button onclick="location.href='index.html'" class="text-white/20 hover:text-white transition-colors">âœ•</button>
        </div>

        <div class="p-6 space-y-5">
            <div onclick="openTrackingLayer()" class="flex items-center gap-4 bg-white/5 p-4 rounded-3xl border border-white/10 cursor-pointer hover:bg-white/10 transition-colors">
                <div class="text-4xl">ğŸš›</div>
                <div>
                    <p class="text-[10px] text-[#FF8200] font-bold animate-pulse">â— ë§ê³ ì²˜ëŸ¼ ì‹ ì„ í•˜ê²Œ ë°°ì†¡ ì¤‘</p>
                    <h2 class="text-sm font-bold">5í†¤ ì¹´ê³  (ê²½ê¸° 88 ë°” 1234)</h2>
                    <p class="text-[10px] text-white/40 italic text-right italic">Mike Driver (99% Trust)</p>
                </div>
            </div>

            <div class="relative pl-6 space-y-6 before:content-[''] before:absolute before:left-[7px] before:top-2 before:bottom-2 before:w-[2px] before:bg-[#FF8200]/30">
                <div class="relative">
                    <div class="absolute -left-[23px] w-4 h-4 rounded-full bg-[#FF8200] border-4 border-[#1a1a1a]"></div>
                    <p class="text-[10px] text-white/40 uppercase">Pickup Location</p>
                    <p id="pickup-point" class="text-xs font-bold">ì¸ì²œ ë¬¼ë¥˜ ë‹¨ì§€ (Incheon Hub)</p>
                </div>
                <div class="relative">
                    <div class="absolute -left-[23px] w-4 h-4 rounded-full bg-[#FFCC00] border-4 border-[#1a1a1a] animate-ping"></div>
                    <p class="text-[10px] text-[#FFCC00] font-bold uppercase">Current Point</p>
                    <p id="current-point" class="text-xs font-bold">ì¶©ì£¼ ë¶„ê¸°ì  í†µê³¼ ì¤‘</p>
                </div>
            </div>

            <!-- ìš´ì†¡ ì¡°ê±´ ì„¤ì • -->
            <div class="glass-card p-4 rounded-2xl space-y-3">
                <h3 class="text-xs font-bold text-[#FFCC00] uppercase tracking-wider">ìš´ì†¡ ì¡°ê±´ ì„¤ì •</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="input-distance" class="text-[10px] text-[#FF8200] font-bold">ìš´ì†¡ ê±°ë¦¬ (km)</label>
                        <input type="number" id="input-distance" value="15" class="w-full bg-black/20 border-b-2 border-[#FF8200]/30 p-2 text-white text-xl font-black outline-none focus:border-[#FF8200] transition-colors mt-1">
                    </div>
                    <div>
                        <label for="input-hours" class="text-[10px] text-[#FF8200] font-bold">ì‘ì—… ì‹œê°„ (ì‹œê°„)</label>
                        <input type="number" id="input-hours" value="2" class="w-full bg-black/20 border-b-2 border-[#FF8200]/30 p-2 text-white text-xl font-black outline-none focus:border-[#FF8200] transition-colors mt-1">
                    </div>
                </div>
            </div>

            <!-- ê³µê³µ í”„ë¡œì íŠ¸ ì¸ì¦ (B2G) -->
            <div class="glass-card p-4 rounded-2xl space-y-4 border border-blue-500/30">
                <div class="flex justify-between items-center">
                    <h3 class="text-xs font-bold text-blue-300/80 uppercase tracking-wider">ê³µê³µ í”„ë¡œì íŠ¸ ì¸ì¦ (B2G)</h3>
                    <div id="verified-badge" class="hidden items-center gap-1 text-[#FFCC00]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                        <span class="text-xs font-bold">Sweetly Verified</span>
                    </div>
                </div>

                <div>
                    <label for="project-code" class="text-[10px] text-blue-400 font-bold">í”„ë¡œì íŠ¸ ì½”ë“œ</label>
                    <input type="text" id="project-code" placeholder="ì˜ˆ: G-2026-BUSAN-01" class="w-full bg-black/20 border-b-2 border-blue-500/30 p-2 text-white text-base font-mono outline-none focus:border-blue-500 transition-colors mt-1">
                </div>

                <div class="flex items-center pt-2">
                    <input id="safety-manager-check" type="checkbox" value="" class="w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-600 ring-offset-gray-800 focus:ring-2">
                    <label for="safety-manager-check" class="ml-2 text-sm font-medium text-white/80">í˜„ì¥ ì•ˆì „ ê´€ë¦¬ì í™•ì¸</label>
                </div>
                <p class="text-[9px] text-white/40 text-center pt-1 !mt-2">
                    ë³¸ ìš´ì†¡ì€ êµ­í† êµí†µë¶€ í‘œì¤€ ìš´ì„ ë° ì•ˆì „ ê°€ì´ë“œë¥¼ ì¤€ìˆ˜í•©ë‹ˆë‹¤.
                </p>
            </div>

            <!-- ê²¬ì  ê³„ì‚° ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
            <div id="estimate-display" class="bg-zinc-900/80 p-4 rounded-2xl border border-[#FF8200]/30 text-center hidden">
                <p class="text-[10px] text-white/50 uppercase tracking-widest mb-1">Total Estimate</p>
                <h3 id="total-cost" class="text-2xl font-black text-white tracking-tight transition-all duration-300"></h3>
                <p id="cost-detail" class="text-[11px] text-[#FFCC00] mt-1 font-bold"></p>
            </div>

            <button onclick="openPaymentModal()" class="btn-elastic w-full bg-gradient-to-r from-[#FF8200] to-[#FFCC00] hover:opacity-90 py-5 rounded-[2rem] text-black font-black text-base shadow-[0_10px_20px_rgba(255,130,0,0.3)]">
                ë§ê³  í˜ì´ë¡œ ë‹¬ì½¤í•˜ê²Œ ê²°ì œí•˜ê¸°
            </button>
        </div>
    </div>

    <!-- ì‹¤ì‹œê°„ ë°°ì†¡ ì¶”ì  ë ˆì´ì–´ -->
    <div id="tracking-layer" class="fixed inset-0 z-[100] bg-[#0f0f0f] p-6 transform translate-y-full transition-transform duration-500 ease-in-out">
        <div class="w-full max-w-[450px] mx-auto h-full flex flex-col">
            <!-- Header -->
            <div class="flex-shrink-0 flex justify-between items-center mb-6">
                <h2 class="text-xl font-black text-white">ì‹¤ì‹œê°„ ë°°ì†¡ ì¶”ì </h2>
                <button onclick="closeTrackingLayer()" class="text-white/50 hover:text-white transition-colors text-2xl">âœ•</button>
            </div>

            <!-- Map Area -->
            <div class="relative w-full h-48 bg-slate-800/50 rounded-2xl overflow-hidden border border-white/10 mb-6">
                <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#94a3b8 1px, transparent 1px); background-size: 20px 20px;"></div>
                <svg class="absolute inset-0 w-full h-full" viewBox="0 0 300 150">
                    <path d="M 30 120 C 80 120, 100 40, 270 40" fill="none" stroke="#FF8200" stroke-width="2.5" stroke-dasharray="5, 5" class="animate-pulse"/>
                    <circle cx="30" cy="120" r="4" fill="#3b82f6" />
                    <circle cx="270" cy="40" r="4" fill="#ef4444" />
                    <text x="145" y="85" font-size="20">ğŸš›</text>
                </svg>
            </div>

            <!-- Driver Profile -->
            <div class="flex items-center gap-4 mb-6">
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&q=80" class="w-16 h-16 rounded-full object-cover border-2 border-white/20" alt="Driver">
                <div class="flex-1">
                    <h3 class="text-lg font-bold">Mike Driver</h3>
                    <p class="text-xs text-white/60">5í†¤ ì¹´ê³  / ê²½ê¸° 88 ë°” 1234</p>
                </div>
            </div>

            <!-- Timeline -->
            <div class="flex-1 space-y-4">
                <div class="flex items-center gap-4 opacity-50">
                    <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M5 13l4 4L19 7"></path></svg></div>
                    <div>
                        <p class="text-sm font-bold">ì¸ì²œ ë¬¼ë¥˜ ë‹¨ì§€</p>
                        <p class="text-xs text-white/50">ì˜¤ì „ 09:00 ì¶œë°œ ì™„ë£Œ</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <div class="w-8 h-8 rounded-full bg-[#FF8200] flex items-center justify-center flex-shrink-0 animate-pulse"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div>
                    <div>
                        <p class="text-sm font-bold text-[#FFCC00]">ì¶©ì£¼ ë¶„ê¸°ì  í†µê³¼ ì¤‘</p>
                        <p class="text-xs text-white/50">ì˜ˆìƒ ë„ì°© ì‹œê°„ê¹Œì§€ 1ì‹œê°„ 30ë¶„ ë‚¨ìŒ</p>
                    </div>
                </div>
                <div class="flex items-center gap-4 opacity-50">
                    <div class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z"></path><circle cx="12" cy="10" r="3"></circle></svg></div>
                    <div>
                        <p class="text-sm font-bold">ë¶€ì‚° ì‹ í•­</p>
                        <p class="text-xs text-white/50">ì˜¤í›„ 03:00 ë„ì°© ì˜ˆì •</p>
                    </div>
                </div>
            </div>

            <!-- Bottom Action Buttons -->
            <div class="flex-shrink-0 grid grid-cols-2 gap-4 pt-4">
                <button class="py-4 bg-white/10 rounded-2xl text-sm font-bold hover:bg-white/20 transition-colors">ë©”ì‹œì§€ ë³´ë‚´ê¸°</button>
                <button class="py-4 bg-gradient-to-r from-[#FF8200] to-[#FFCC00] text-black rounded-2xl text-sm font-bold">ê¸°ì‚¬ë‹˜ê»˜ ì „í™”í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="payment-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/90 backdrop-blur-sm p-4">
        <div class="w-full max-w-[400px] bg-[#1a1a1a] border-2 border-[#FF8200] rounded-[30px] overflow-hidden shadow-[0_0_50px_rgba(255,130,0,0.4)] relative modal-animate">
            <div id="modal-content" class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-black text-white italic flex items-center gap-2">
                        <span class="text-[#FF8200]">PAYMENT</span> GATE
                    </h3>
                    <button onclick="closePaymentModal()" class="text-white/30 hover:text-white transition-colors">âœ•</button>
                </div>
                
                <div class="text-center mb-8">
                    <p class="text-[10px] text-white/50 uppercase tracking-widest mb-1">Total Estimated Cost</p>
                    <h2 id="modal-cost" class="text-3xl font-black text-[#FF8200] tracking-tight drop-shadow-[0_0_10px_rgba(255,130,0,0.5)]">0 KRW</h2>
                    
                    <div class="mt-4 p-3 bg-white/5 rounded-xl border border-white/10">
                        <p class="text-[10px] text-white/40 uppercase mb-1 flex items-center justify-center gap-1">
                            <span class="w-1 h-1 bg-[#FF8200] rounded-full"></span> Route Summary
                        </p>
                        <p id="modal-route" class="text-xs font-bold text-white leading-tight">ì¸ì²œ ë¬¼ë¥˜ ë‹¨ì§€ â†’ ì¶©ì£¼ ë¶„ê¸°ì </p>
                    </div>
                </div>

                <div class="space-y-3 mb-8">
                    <p class="text-[10px] text-white/50 uppercase font-bold ml-1">Select Payment Method</p>
                    
                    <button onclick="selectPaymentMethod(this)" class="pay-method-btn w-full p-4 rounded-2xl border border-[#FF8200] bg-[#FF8200]/20 flex items-center justify-between transition-all active:scale-95 group">
                        <span class="text-xs font-bold text-white flex items-center gap-3">
                            <span class="text-lg">ğŸ¥­</span> Mango Pay
                        </span>
                        <div class="w-4 h-4 rounded-full border-2 border-[#FF8200] flex items-center justify-center">
                            <div class="w-2 h-2 rounded-full bg-[#FF8200]"></div>
                        </div>
                    </button>

                    <button onclick="selectPaymentMethod(this)" class="pay-method-btn w-full p-4 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-between hover:bg-white/10 transition-all active:scale-95 group">
                        <span class="text-xs font-bold text-white/70 group-hover:text-white flex items-center gap-3">
                            <span class="text-lg">ğŸ’³</span> Credit Card
                        </span>
                        <div class="w-4 h-4 rounded-full border-2 border-white/30 group-hover:border-white/50"></div>
                    </button>

                    <button onclick="selectPaymentMethod(this)" class="pay-method-btn w-full p-4 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-between hover:bg-white/10 transition-all active:scale-95 group">
                        <span class="text-xs font-bold text-white/70 group-hover:text-white flex items-center gap-3">
                            <span class="text-lg text-[#FFCC00]">Ï€</span> Pi Network
                        </span>
                        <div class="w-4 h-4 rounded-full border-2 border-white/30 group-hover:border-white/50"></div>
                    </button>
                </div>

                <button onclick="processPayment()" class="w-full py-4 bg-gradient-to-r from-[#FF8200] to-[#FFCC00] rounded-2xl text-black font-black text-sm shadow-[0_0_20px_rgba(255,130,0,0.3)] hover:scale-[1.02] active:scale-95 transition-all">
                    ê²°ì œ ìŠ¹ì¸ ìš”ì²­ (Approve)
                </button>
            </div>
        </div>
    </div>

    <script>
        // 1. ìš”ê¸ˆí‘œ ì •ì˜ (Pricing Policy)
        const pricingPolicy = {
            currency: 'KRW',
            baseRate: 100000,      // ê¸°ë³¸ìš”ê¸ˆ
            distanceRate: 2000,    // kmë‹¹ ë‹¨ê°€
            timeRate: 50000,       // ì‹œê°„ë‹¹ ë‹¨ê°€
            minGuaranteeHrs: 4,    // ìµœì†Œ ë³´ì¥ ì‹œê°„
            b2gDiscount: 0.05      // ê´€ê¸‰ ê³µì‚¬ í• ì¸ìœ¨ (5%)
        };

        // 2. ê²¬ì  ê³„ì‚° í•¨ìˆ˜ (CalculationService)
        function calculateEstimate(distance, workHours, isB2G) {
            // ìµœì†Œ ë³´ì¥ ì‹œê°„ ë¡œì§ ì ìš©: ì‹¤ì œ ì‘ì—…ì‹œê°„ì´ 4ì‹œê°„ ë¯¸ë§Œì´ì–´ë„ 4ì‹œê°„ìœ¼ë¡œ ê³„ì‚°
            const appliedHours = Math.max(workHours, pricingPolicy.minGuaranteeHrs);
            const isMinApplied = workHours > 0 && appliedHours > workHours;

            const baseCost = pricingPolicy.baseRate;
            const distanceCost = distance * pricingPolicy.distanceRate;
            const timeCost = appliedHours * pricingPolicy.timeRate;
            
            let total = baseCost + distanceCost + timeCost;
            let discountApplied = false;

            // ê³µê³µ í”„ë¡œì íŠ¸ í• ì¸ ì ìš©
            if (isB2G) {
                total *= (1 - pricingPolicy.b2gDiscount);
                discountApplied = true;
            }

            return { total, isMinApplied, workHours, discountApplied };
        }

        // 3. ì‹¤ì‹œê°„ ê³„ì‚° ë° UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateAndDisplayEstimate() {
            const distance = parseFloat(document.getElementById('input-distance').value) || 0;
            const workHours = parseFloat(document.getElementById('input-hours').value) || 0;
            const isB2G = document.getElementById('safety-manager-check').checked;

            const result = calculateEstimate(distance, workHours, isB2G);
            
            // UI ì—…ë°ì´íŠ¸
            const totalCostEl = document.getElementById('total-cost');
            totalCostEl.innerText = result.total.toLocaleString() + ' ì›';
            
            let detailText = result.isMinApplied 
                ? `(ìµœì†Œ ${pricingPolicy.minGuaranteeHrs}ì‹œê°„ ë³´ì¥ ì •ì±… ì ìš©ë¨)` 
                : `(${result.workHours}ì‹œê°„ ì‘ì—… ê¸°ì¤€)`;

            if (result.discountApplied) {
                detailText += ' | ê´€ê¸‰ ê³µì‚¬ 5% í• ì¸ ì ìš©';
            }

            document.getElementById('cost-detail').innerText = detailText;
            document.getElementById('estimate-display').classList.remove('hidden');

            // ì‹œê°ì  í”¼ë“œë°±
            totalCostEl.classList.add('text-[#FFCC00]', 'scale-110');
            setTimeout(() => {
                totalCostEl.classList.remove('text-[#FFCC00]', 'scale-110');
            }, 300);
        }

        // 4. í™”ë©´ ë¡œë“œ ë° ì…ë ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        window.addEventListener('load', () => {
            updateAndDisplayEstimate(); // ì´ˆê¸° ê³„ì‚°

            const projectCodeInput = document.getElementById('project-code');
            const verifiedBadge = document.getElementById('verified-badge');
            const safetyCheck = document.getElementById('safety-manager-check');

            document.getElementById('input-distance').addEventListener('input', updateAndDisplayEstimate);
            document.getElementById('input-hours').addEventListener('input', updateAndDisplayEstimate);
            safetyCheck.addEventListener('change', updateAndDisplayEstimate);

            projectCodeInput.addEventListener('input', () => {
                if (projectCodeInput.value.trim() !== '') {
                    verifiedBadge.classList.remove('hidden');
                    verifiedBadge.classList.add('flex');
                } else {
                    verifiedBadge.classList.add('hidden');
                    verifiedBadge.classList.remove('flex');
                }
            });
        });

        // --- Payment Modal Logic ---
        function openPaymentModal() {
            const totalCost = document.getElementById('total-cost').innerText;
            if (!totalCost) {
                alert("ë¨¼ì € ìš´ì†¡ ì¡°ê±´ì„ ì…ë ¥í•˜ì—¬ ê²¬ì ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
                return;
            }

            // Update Modal Data
            document.getElementById('modal-cost').innerText = totalCost;
            
            const pickup = document.getElementById('pickup-point').innerText.split('(')[0].trim();
            const current = document.getElementById('current-point').innerText.split('í†µê³¼')[0].trim();
            document.getElementById('modal-route').innerText = `${pickup} â†’ ${current}`;

            // Show Modal
            document.getElementById('payment-modal').classList.remove('hidden');
        }

        function closePaymentModal() {
            document.getElementById('payment-modal').classList.add('hidden');
        }

        function selectPaymentMethod(selectedBtn) {
            // Reset all buttons
            document.querySelectorAll('.pay-method-btn').forEach(btn => {
                btn.className = 'pay-method-btn w-full p-4 rounded-2xl border border-white/10 bg-white/5 flex items-center justify-between hover:bg-white/10 transition-all active:scale-95 group';
                btn.querySelector('div').innerHTML = ''; // Clear radio circle
                btn.querySelector('span').classList.add('text-white/70');
            });

            // Highlight selected
            selectedBtn.className = 'pay-method-btn w-full p-4 rounded-2xl border border-[#FF8200] bg-[#FF8200]/20 flex items-center justify-between transition-all active:scale-95 group';
            selectedBtn.querySelector('div').innerHTML = '<div class="w-2 h-2 rounded-full bg-[#FF8200]"></div>';
            selectedBtn.querySelector('span').classList.remove('text-white/70');
            selectedBtn.querySelector('span').classList.add('text-white');
        }

        function processPayment() {
            const content = document.getElementById('modal-content');
            
            // 1ë‹¨ê³„: ê²°ì œ ì™„ë£Œ ìƒíƒœ í‘œì‹œ
            content.innerHTML = `
                <div class="flex flex-col items-center justify-center py-12 space-y-6 text-center h-full modal-animate">
                    <div class="relative">
                        <div class="w-24 h-24 rounded-full bg-green-500 flex items-center justify-center shadow-[0_0_30px_rgba(34,197,94,0.6)]" style="animation: checkmark 0.5s ease forwards;">
                            <svg class="w-12 h-12 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="4"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"></path></svg>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-black text-white mb-2">ë§ê³  ê²°ì œ ì™„ë£Œ!</h3>
                        <p class="text-[#FF8200] text-xs font-bold uppercase tracking-widest">Payment Confirmed</p>
                    </div>
                </div>
            `;

            // 2ë‹¨ê³„: 1.5ì´ˆ í›„ "ê¸°ì‚¬ë‹˜ ì•Œë¦¼ ì „ì†¡" ìƒíƒœë¡œ ì „í™˜
            setTimeout(() => {
                content.innerHTML = `
                    <div class="flex flex-col items-center justify-center py-12 space-y-6 text-center h-full modal-animate">
                        <div class="relative">
                            <div class="w-20 h-20 border-4 border-[#FF8200]/20 border-t-[#FF8200] rounded-full animate-spin"></div>
                            <div class="absolute inset-0 flex items-center justify-center text-2xl">ğŸš›</div>
                        </div>
                        <div>
                            <h3 class="text-xl font-black text-white mb-2 italic">ê°€ì¥ ê°€ê¹Œìš´ ë§ê³  ê¸°ì‚¬ë‹˜ê»˜<br>ë°°ì°¨ ì•Œë¦¼ì„ ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤...</h3>
                            <div class="flex justify-center gap-1 mt-3">
                                <span class="w-2 h-2 bg-[#FF8200] rounded-full animate-bounce" style="animation-delay: 0.1s"></span>
                                <span class="w-2 h-2 bg-[#FF8200] rounded-full animate-bounce" style="animation-delay: 0.2s"></span>
                                <span class="w-2 h-2 bg-[#FF8200] rounded-full animate-bounce" style="animation-delay: 0.3s"></span>
                            </div>
                        </div>
                        <p class="text-[10px] text-white/40 uppercase tracking-[0.2em]">Dispatching best driver for you</p>
                    </div>
                `;
            }, 1500);

            // 3ë‹¨ê³„: ë‹¤ì‹œ 3ì´ˆ í›„ ë©”ì¸ìœ¼ë¡œ ì´ë™ (ë˜ëŠ” ì™„ë£Œ ë©”ì‹œì§€)
            setTimeout(() => {
                location.href = 'index.html';
            }, 4500);
        }

        // --- Tracking Layer Logic ---
        function openTrackingLayer() {
            const layer = document.getElementById('tracking-layer');
            if (layer) layer.classList.remove('translate-y-full');
        }

        function closeTrackingLayer() {
            const layer = document.getElementById('tracking-layer');
            if (layer) layer.classList.add('translate-y-full');
        }

    </script>
</body>
</html>