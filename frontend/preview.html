<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mango Food | AR & Mobile Hybrid</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.0/lucide.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;600;800&family=Noto+Sans+KR:wght@300;500;700&display=swap');

        :root {
            --mango-gold: #f59e0b;
            --jungle-dark: #06110e;
            --glass-bg: rgba(15, 23, 20, 0.7);
        }

        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            background-color: var(--jungle-dark);
            color: #f8fafc;
            margin: 0;
            overflow: hidden;
        }

        .premium-gradient {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(245, 158, 11, 0.15);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8);
        }

        .ar-overlay {
            position: fixed;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            pointer-events: none;
        }

        .scroll-container::-webkit-scrollbar { display: none; }

        .menu-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: linear-gradient(180deg, rgba(30,41,37,0.5) 0%, rgba(15,23,20,0.8) 100%);
        }

        .font-playfair { font-family: 'Playfair Display', serif; }
    </style>
</head>
<body class="mobile-view">

<div id="app" class="max-w-md mx-auto h-screen relative flex flex-col overflow-hidden">
    
    <div class="ar-overlay flex flex-col items-center w-full px-10">
        <div class="glass-panel rounded-full px-6 py-2 flex items-center space-x-3 mb-4">
            <div class="w-3 h-3 bg-green-500 rounded-full animate-ping"></div>
            <span class="text-[12px] font-bold tracking-widest uppercase opacity-80" id="arStatus">Arrived at Mango Heaven</span>
        </div>
        <div class="flex flex-col items-center hidden" id="arArrow">
            <i data-lucide="chevron-down" class="w-8 h-8 text-yellow-500 animate-bounce"></i>
        </div>
    </div>

    <header class="z-50 p-6 pt-12 pb-8 flex justify-between items-start">
        <div>
            <h1 class="text-4xl font-playfair text-white tracking-tight">Mango <span class="text-yellow-500">Food</span></h1>
            <p class="text-xs text-gray-400 mt-1 uppercase tracking-widest opacity-60" data-i18n="tagline">The Taste of Paradise</p>
        </div>
        <div class="flex flex-col items-end space-y-3">
            <div class="flex space-x-2">
                <button id="adminToggle" class="glass-panel p-2 rounded-full border-white/10">
                    <i data-lucide="settings" class="w-4 h-4 text-gray-400"></i>
                </button>
                <select id="langSelect" class="bg-black/40 text-[10px] border border-yellow-500/30 rounded-full px-3 py-1 text-yellow-500 focus:outline-none appearance-none cursor-pointer">
                    <option value="ko">한국어</option>
                    <option value="en">English</option>
                    <option value="ja">日本語</option>
                </select>
            </div>
            <button id="viewToggle" class="glass-panel p-2 rounded-full border-yellow-500/50">
                <i data-lucide="glasses" class="w-5 h-5 text-yellow-500"></i>
            </button>
        </div>
    </header>

    <div id="adminPanel" class="px-6 mb-4 hidden">
        <div class="glass-panel p-4 rounded-2xl border-yellow-500/30 space-y-3">
            <h4 class="text-xs font-bold text-yellow-500 uppercase">Manager: Add Menu</h4>
            <input type="text" id="newMenuName" placeholder="Menu Name" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-xs">
            <input type="number" id="newMenuPrice" placeholder="Price (ex: 25000)" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-xs">
            <input type="text" id="newMenuImg" placeholder="Image URL (선택사항)" class="w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-xs">
            <button onclick="window.handleAdminAdd()" class="w-full premium-gradient py-2 rounded-lg text-black text-xs font-bold">ADD TO LIST</button>
        </div>
    </div>

    <div class="px-6 mb-6">
        <div class="glass-panel rounded-2xl flex items-center px-4 py-3 border-white/5">
            <i data-lucide="search" class="w-5 h-5 text-gray-500 mr-3"></i>
            <input type="text" id="searchInput" class="bg-transparent w-full text-sm outline-none text-white" data-i18n-placeholder="search_placeholder">
        </div>
    </div>

    <main class="flex-grow px-6 overflow-y-auto scroll-container pb-32">
        <div class="flex space-x-4 overflow-x-auto no-scrollbar mb-8" id="categoryList"></div>
        <div id="menuContainer" class="space-y-6"></div>
    </main>

    <nav class="absolute bottom-0 w-full glass-panel p-6 rounded-t-[3rem] flex justify-around items-center border-t-0">
        <button class="text-yellow-500 flex flex-col items-center">
            <i data-lucide="compass" class="w-7 h-7"></i>
            <span class="text-[10px] font-bold mt-1 uppercase tracking-tighter" data-i18n="nav_explore">Explore</span>
        </button>
        <button class="text-gray-500 flex flex-col items-center relative" id="cartToggle">
            <i data-lucide="shopping-cart" class="w-7 h-7"></i>
            <span class="text-[10px] font-bold mt-1 uppercase tracking-tighter" data-i18n="nav_order">Orders</span>
            <span id="cartBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-[9px] w-4 h-4 rounded-full flex items-center justify-center hidden">0</span>
        </button>
        <button id="perksBtn" class="text-gray-500 flex flex-col items-center">
            <i data-lucide="award" class="w-7 h-7"></i>
            <span class="text-[10px] font-bold mt-1 uppercase tracking-tighter" data-i18n="nav_perks">Perks</span>
        </button>
    </nav>
</div>

<div id="cartOverlay" class="fixed inset-0 bg-black/80 z-[100] hidden items-end">
    <div class="w-full max-w-md mx-auto glass-panel rounded-t-[3rem] p-8 transform translate-y-full transition-transform duration-500" id="cartContent">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-2xl font-playfair" data-i18n="cart_title">Selection</h2>
            <button id="closeCart" class="p-2 bg-white/5 rounded-full"><i data-lucide="x" class="w-5 h-5"></i></button>
        </div>
        <div id="cartItems" class="space-y-4 max-h-[40vh] overflow-y-auto mb-8 pr-2"></div>
        <div class="flex justify-between items-center mb-6">
            <span class="text-gray-400" data-i18n="total_label">Total</span>
            <span id="totalPrice" class="text-2xl font-bold text-yellow-500">$ 0.00</span>
        </div>
        <button class="w-full premium-gradient py-5 rounded-2xl text-black font-extrabold text-lg uppercase tracking-widest shadow-2xl" data-i18n="checkout_btn">Confirm Order</button>
    </div>
</div>

<script type="module">
    const i18n = {
        ko: { tagline: "낙원의 맛", search_placeholder: "메뉴를 검색하세요...", nav_explore: "탐색", nav_order: "주문", nav_perks: "혜택", cart_title: "장바구니", total_label: "총 금액", checkout_btn: "결제하기", cat_all: "전체", cat_best: "인기", cat_drink: "음료", price_unit: "₩" },
        en: { tagline: "Taste of Paradise", search_placeholder: "Find your menu...", nav_explore: "Explore", nav_order: "Order", nav_perks: "Perks", cart_title: "My Cart", total_label: "Total", checkout_btn: "Checkout", cat_all: "All", cat_best: "Best", cat_drink: "Drink", price_unit: "$" }
    };

    // --- 메뉴 데이터 수정: 와규 토마호크 및 모든 이미지 고화질로 채움 ---
    const mockMenu = [
        { id: 1, name: "와규 토마호크 구이", category: "best", price: 98000, 
          img: "https://images.unsplash.com/photo-1596701072970-d8b39178a2e6?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", // 와규 토마호크
          desc: "뼈대 있는 맛, 24k 골드 망고 글레이즈를 곁들인 프리미엄 와규 토마호크" },
        { id: 2, name: "선셋 스캘럽 카르파치오", category: "best", price: 38000, 
          img: "https://images.unsplash.com/photo-1550577771-4d57c28d0f81?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", // 관자 카르파치오
          desc: "노을을 담은 신선한 홋카이도 관자와 시트러스 망고 폼의 조화" },
        { id: 3, name: "아일랜드 랍스터 롤", category: "best", price: 45000, 
          img: "https://images.unsplash.com/photo-1627932688046-6085a6a575a6?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", // 랍스터 롤
          desc: "차가운 랍스터 살과 망고 아이올리가 어우러진 브리오슈 롤" },
        { id: 4, name: "리얼 망고 네クター", category: "drink", price: 15000, 
          img: "https://images.unsplash.com/photo-1546252189-e5ac9c898c69?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", // 망고 주스
          desc: "100% 유기농 섬 망고로 만든 순수 망고 주스" },
        { id: 5, name: "스파클링 망고 모히또", category: "drink", price: 13000, 
          img: "https://images.unsplash.com/photo-1596701072970-d8b39178a2e6?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", // 모히또 (임시)
          desc: "청량한 스파클링과 망고의 달콤함이 어우러진 칵테일" } // 새로운 음료 추가
    ];
    // --- 메뉴 데이터 수정 끝 ---

    let currentLang = 'ko';
    let cart = [];
    let isGlassMode = false;

    function refreshIcons() { if (window.lucide) window.lucide.createIcons(); }

    function renderCategories() {
        const container = document.getElementById('categoryList');
        const cats = ['all', 'best', 'drink'];
        container.innerHTML = cats.map(cat => `
            <button onclick="window.filterMenu('${cat}')" class="cat-pill whitespace-nowrap px-6 py-2 rounded-full glass-panel text-sm font-bold border-white/10 ${cat === 'all' ? 'text-yellow-500 border-yellow-500/50' : 'text-gray-400'}">
                ${i18n[currentLang]['cat_'+cat]}
            </button>
        `).join('');
    }

    window.filterMenu = (cat, event) => { // event 매개변수 추가
        const pills = document.querySelectorAll('.cat-pill');
        pills.forEach(p => {
            p.classList.remove('text-yellow-500', 'border-yellow-500/50');
            p.classList.add('text-gray-400');
        });
        if (event && event.target) { // event가 존재하고 target 속성이 있을 때만 접근
            event.target.classList.add('text-yellow-500', 'border-yellow-500/50');
        }
        renderMenu(cat);
    }

    function renderMenu(category = 'all') {
        const container = document.getElementById('menuContainer');
        const filtered = category === 'all' ? mockMenu : mockMenu.filter(m => m.category === category);
        
        container.innerHTML = filtered.map(item => `
            <div class="menu-card glass-panel p-4 rounded-[2rem] flex items-center space-x-5">
                <div class="relative">
                    <img src="${item.img}" class="w-24 h-24 rounded-2xl object-cover shadow-2xl">
                    <div class="absolute -top-2 -right-2 bg-yellow-500 text-black text-[9px] font-black px-2 py-1 rounded-full uppercase">Premium</div>
                </div>
                <div class="flex-grow">
                    <h3 class="text-lg font-bold text-white mb-1 leading-tight">${item.name}</h3>
                    <p class="text-[10px] text-gray-500 line-clamp-1 mb-3">${item.desc}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm font-black text-yellow-500 tracking-tighter">${i18n[currentLang].price_unit} ${item.price.toLocaleString()}</span>
                        <button onclick="window.addToCart(${item.id})" class="p-2 bg-yellow-500 rounded-xl text-black"><i data-lucide="plus" class="w-4 h-4"></i></button>
                    </div>
                </div>
            </div>
        `).join('');
        refreshIcons();
    }

    // 관리자 메뉴 추가 핸들러
    window.handleAdminAdd = () => {
        const name = document.getElementById('newMenuName').value;
        const price = document.getElementById('newMenuPrice').value;
        const img = document.getElementById('newMenuImg').value || "https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?w=500"; // 이미지 없으면 기본 이미지
        if(!name || !price) return alert("메뉴 이름과 가격을 입력해주세요.");

        const newItem = {
            id: mockMenu.length + 1,
            name: name,
            category: "best", // 기본은 'best'로 설정
            price: parseInt(price),
            img: img,
            desc: "새롭게 추가된 메뉴입니다."
        };
        mockMenu.unshift(newItem); // 맨 앞에 추가
        renderMenu();
        alert("메뉴가 성공적으로 추가되었습니다!");
        document.getElementById('newMenuName').value = "";
        document.getElementById('newMenuPrice').value = "";
        document.getElementById('newMenuImg').value = "";
    };

    window.addToCart = (id) => {
        const item = mockMenu.find(m => m.id === id);
        cart.push(item);
        updateCart();
    };

    function updateCart() {
        const badge = document.getElementById('cartBadge');
        badge.innerText = cart.length;
        badge.classList.toggle('hidden', cart.length === 0);
        let total = cart.reduce((sum, item) => sum + item.price, 0);
        document.getElementById('totalPrice').innerText = `${i18n[currentLang].price_unit} ${total.toLocaleString()}`;
    }

    function init() {
        renderCategories(); // 카테고리도 다시 렌더링하도록 추가
        renderMenu();
        refreshIcons();

        document.getElementById('langSelect').onchange = (e) => {
            currentLang = e.target.value;
            renderCategories();
            renderMenu();
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                el.innerText = i18n[currentLang][key];
            });
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                el.placeholder = i18n[currentLang][key];
            });
            updateCart(); // 언어 변경 시 장바구니 총 금액도 업데이트
        };

        // 관리자 패널 토글
        document.getElementById('adminToggle').onclick = () => {
            document.getElementById('adminPanel').classList.toggle('hidden');
        };

        // Perks 버튼 이벤트
        document.getElementById('perksBtn').onclick = () => {
            alert("✨ Mango Premium Perks\n\n1. 10% Welcome Discount Coupon\n2. Free Dessert on Birthdays\n3. Priority AR Navigation Access");
        };

        document.getElementById('viewToggle').onclick = () => {
            isGlassMode = !isGlassMode;
            document.getElementById('arArrow').classList.toggle('hidden', !isGlassMode);
            document.getElementById('app').classList.toggle('scale-95', isGlassMode);
            document.getElementById('arStatus').innerText = isGlassMode ? "HUD: Active Navigation" : "Arrived at Mango Heaven";
        };

        document.getElementById('cartToggle').onclick = () => {
            document.getElementById('cartOverlay').classList.remove('hidden');
            document.getElementById('cartOverlay').classList.add('flex');
            setTimeout(() => document.getElementById('cartContent').classList.remove('translate-y-full'), 10);
        };

        document.getElementById('closeCart').onclick = () => {
            document.getElementById('cartContent').classList.add('translate-y-full');
            setTimeout(() => document.getElementById('cartOverlay').classList.add('hidden'), 500);
        };
    }

    window.onload = init;
</script>
</body>
</html>