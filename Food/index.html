<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>ğŸ¥­ Mango Heaven - íŠ¸ë¡œí”¼ì»¬ í“¨ì „ ë‹¤ì´ë‹ (v7)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {padding-top: 30px;
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* Slate Blue Dark */
            color: #f8f8f8;
        }
        .tropical-gradient {
            background: linear-gradient(135deg, #f97316 0%, #fbbf24 100%); /* Orange to Amber */
        }
        .menu-item {
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .menu-item:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px rgba(255, 193, 7, 0.1);
        }
        /* ì¢‹ì•„ìš” ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #likeButton {
            transition: all 0.2s;
            cursor: pointer;
        }
        .liked #heartIcon {
            fill: #ef4444; /* Red 500 */
            stroke: #ef4444;
            animation: pulse 0.5s;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        /* ë©”ë‰´ ìƒì„¸ ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }
        .modal-content {
            margin: 5% auto;
            max-width: 700px;
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* ì¢Œì„ ì„ íƒ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .seat-card {
            cursor: pointer;
            transition: all 0.2s;
        }
        .seat-card.selected {
            border: 3px solid #fcd34d; /* Amber-300 */
            background-color: #1f2937; /* Gray-800 */
            box-shadow: 0 0 15px rgba(252, 211, 77, 0.4);
        }
    </style>
</head>
<body class="p-4 sm:p-8">
    <div class="w-full pt-8 sm:pt-0"></div> 

    <div class="max-w-6xl mx-auto bg-gray-900 rounded-3xl shadow-2xl overflow-hidden">

        <header class="relative h-64 sm:h-96 bg-cover bg-center" style="background-image: url('https://placehold.co/1200x600/15803d/ffffff?text=Mango+Heaven+Restaurant');">
            <div class="absolute inset-0 bg-gradient-to-b from-black/70 via-black/30 to-black/80 flex items-end p-6 sm:p-10">
                <div class="text-white w-full flex justify-between items-end">
                    <div class="overflow-visible"> <h1 class="text-4xl sm:text-6xl font-[1000] mb-1 italic tracking-tighter leading-tight text-orange-500 drop-shadow-[0_2px_10px_rgba(0,0,0,0.8)]">
                            MANGO <span class="text-white">CASTLE</span>
                        </h1>
                        <p class="text-lg sm:text-2xl font-light text-yellow-400 italic">#íŠ¸ë¡œí”¼ì»¬í“¨ì „ #ì‹œê·¸ë‹ˆì²˜ë§ê³  #40ë…„ì „í†µ</p>
                        <div class="flex items-center mt-3">
                            <span class="text-xl text-yellow-500">â˜…â˜…â˜…â˜…â˜…</span>
                            <span class="ml-3 text-sm sm:text-lg opacity-80">(4.8 / 5.0, 1,200 ë¦¬ë·°)</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- 2. í•µì‹¬ ì •ë³´ & ì˜ˆì•½/ì£¼ë¬¸ ì„¹ì…˜ -->
        <main class="p-4 sm:p-10 grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- ì¢Œì¸¡: ìƒì„¸ ì†Œê°œ ë° ê¸°ëŠ¥ -->
            <div class="lg:col-span-2 space-y-8">
                
                <!-- ë ˆìŠ¤í† ë‘ ì¸ì‚¿ë§ ë° ì†Œê°œ -->
                <section class="p-6 bg-gray-800 rounded-2xl shadow-lg border-l-4 border-yellow-500">
                    <h2 class="text-3xl font-bold mb-3 text-yellow-400">ì…°í”„ì˜ ì¸ì‚¬ë§</h2>
                    <p class="text-gray-300 leading-relaxed">
                        ì•ˆë…•í•˜ì„¸ìš”, Mango Heavenì…ë‹ˆë‹¤! 1985ë…„ë¶€í„° 40ë…„ê°„ ì˜¤ì§ ì—´ëŒ€ ê³¼ì¼ê³¼ ì•„ì‹œì•„ ì „í†µ ìš”ë¦¬ì˜ í™˜ìƒì ì¸ í“¨ì „ì— ë§¤ì§„í•´ì™”ìŠµë‹ˆë‹¤.
                    </p>
                </section>

                <!-- ì˜ì—… ì‹œê°„í‘œ -->
                <section class="p-6 bg-gray-800 rounded-2xl shadow-lg border-l-4 border-sky-500">
                    <h2 class="text-3xl font-bold mb-3 text-sky-400">ğŸ•’ ì˜ì—… ì‹œê°„ ë° íœ´ë¬´</h2>
                    <table class="w-full text-left text-gray-300">
                        <tbody class="divide-y divide-gray-700">
                            <tr><th class="py-2 font-semibold">ì›”~ê¸ˆ</th><td class="py-2">11:00 ~ 22:00</td></tr>
                        </tbody>
                    </table>
                </section>

                <!-- 3. ë©”ë‰´ ë° ì‚¬ì§„ ê°¤ëŸ¬ë¦¬ -->
                <section>
                    <h2 class="text-3xl font-bold mb-4 text-orange-400">ğŸŒ´ ì‹œê·¸ë‹ˆì²˜ ë©”ë‰´ (Top 3)</h2>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        
                        <!-- ë©”ë‰´ ì•„ì´í…œ 1: ë§ê³  ì‰¬ë¦¼í”„ íƒ€ì½” -->
                        <div class="menu-item relative overflow-hidden rounded-xl shadow-lg bg-gray-800"
                             onclick="showMenuDetail('taco')"
                             data-menu-id="taco">
                            <img src="https://placehold.co/400x300/f59e0b/000000?text=Mango+Taco" onerror="this.onerror=null; this.src='https://placehold.co/400x300/f59e0b/000000?text=Placeholder'" alt="ì‹œê·¸ë‹ˆì²˜ ë§ê³  íƒ€ì½”" class="w-full h-36 object-cover transition duration-300 hover:scale-105">
                            <div class="p-3">
                                <h3 class="font-semibold text-yellow-300">ë§ê³  ì‰¬ë¦¼í”„ íƒ€ì½”</h3>
                                <p class="text-xs text-gray-400 mt-1">ì‹ ì„ í•œ ë§ê³  ì‚´ì‚¬ì™€ ì¹ ë¦¬ ì‰¬ë¦¼í”„</p>
                                <p class="font-bold text-lg mt-1">22,000ì›</p>
                            </div>
                        </div>

                        <!-- ë©”ë‰´ ì•„ì´í…œ 2: ì•„ë³´ì¹´ë„ í¬ë¦¼ ëˆ„ë“¤ -->
                        <div class="menu-item relative overflow-hidden rounded-xl shadow-lg bg-gray-800"
                             onclick="showMenuDetail('noodle')"
                             data-menu-id="noodle">
                            <img src="https://placehold.co/400x300/10b981/ffffff?text=Avocado+Noodle" onerror="this.onerror=null; this.src='https://placehold.co/400x300/10b981/ffffff?text=Placeholder'" alt="ì•„ë³´ì¹´ë„ í¬ë¦¼ ëˆ„ë“¤" class="w-full h-36 object-cover transition duration-300 hover:scale-105">
                            <div class="p-3">
                                <h3 class="font-semibold text-green-300">ì•„ë³´ì¹´ë„ í¬ë¦¼ ëˆ„ë“¤</h3>
                                <p class="text-xs text-gray-400 mt-1">ë¶€ë“œëŸ¬ìš´ ì•„ë³´ì¹´ë„ í¬ë¦¼ê³¼ ìƒë©´</p>
                                <p class="font-bold text-lg mt-1">25,000ì›</p>
                            </div>
                        </div>

                        <!-- ë©”ë‰´ ì•„ì´í…œ 3: íŒŒì¸ì• í”Œ íŠ¸ë¡œí”¼ì»¬ ë¼ì´ìŠ¤ -->
                        <div class="menu-item relative overflow-hidden rounded-xl shadow-lg bg-gray-800"
                             onclick="showMenuDetail('rice')"
                             data-menu-id="rice">
                            <img src="https://placehold.co/400x300/ef4444/ffffff?text=Pineapple+Rice" onerror="this.onerror=null; this.src='https://placehold.co/400x300/ef4444/ffffff?text=Placeholder'" alt="íŒŒì¸ì• í”Œ ë³¶ìŒë°¥" class="w-full h-36 object-cover transition duration-300 hover:scale-105">
                            <div class="p-3">
                                <h3 class="font-semibold text-red-300">íŒŒì¸ì• í”Œ íŠ¸ë¡œí”¼ì»¬ ë¼ì´ìŠ¤</h3>
                                <p class="text-xs text-gray-400 mt-1">íŒŒì¸ì• í”Œ ì†ì— ë‹´ê¸´ ë§¤ì½¤í•œ ë³¶ìŒë°¥</p>
                                <p class="font-bold text-lg mt-1">18,000ì›</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ì „ì²´ ë©”ë‰´ ë³´ê¸° ë²„íŠ¼ -->
                    <div class="text-center mt-6">
                         <button class="px-8 py-3 bg-indigo-600 text-white font-bold rounded-full hover:bg-indigo-700 transition shadow-lg">
                            + ì „ì²´ ë©”ë‰´ (18ì¢…) ë³´ê¸°
                        </button>
                    </div>
                </section>

                <!-- 4. í•µì‹¬ ë¦¬ë·° í‚¤ì›Œë“œ ìš”ì•½ ë° ë³„ì  ìƒì„¸ ë¶„ì„ -->
                <section>
                    <h2 class="text-3xl font-bold mb-4 text-purple-400">âœ¨ ê³ ê° Vibe & ìƒì„¸ ë¦¬ë·° ë¶„ì„</h2>
                    <div class="p-4 bg-gray-800 rounded-xl shadow-inner mb-6">
                        <div class="flex flex-wrap gap-2">
                            <span class="bg-yellow-900/50 text-yellow-300 px-3 py-1 rounded-full text-sm font-medium border border-yellow-700">#ì¹œì ˆí•œì§ì›</span>
                        </div>
                    </div>
                </section>
            </div>

            <!-- ìš°ì¸¡: ì˜ˆì•½ ë° ì£¼ë¬¸ í¼ -->
            <aside class="lg:col-span-1">
                <div class="sticky top-10 p-6 tropical-gradient rounded-2xl shadow-xl text-gray-900">
                    <h2 class="text-2xl font-bold mb-4 text-white">ğŸ›µ ì˜ˆì•½ & ì£¼ë¬¸</h2>
                    
                    <button onclick="location.href='../Transfer/mango_quick_dashboard.html'" class="w-full mb-6 py-3 bg-white/20 border border-white/40 rounded-xl text-white font-bold hover:bg-white/30 transition flex items-center justify-center gap-2 backdrop-blur-sm shadow-lg">
                        <span>ğŸš€</span> ì‹¤ì‹œê°„ ë°°ë‹¬ í˜„í™© í™•ì¸
                    </button>

                    <!-- ì¥ë°”êµ¬ë‹ˆ ë¯¸ë¦¬ë³´ê¸° -->
                    <div class="mb-6 p-4 bg-white/90 rounded-lg shadow-inner">
                        <h3 class="text-lg font-bold text-gray-900 mb-2 border-b border-gray-300 pb-1">ğŸ›’ ë‚´ ì¥ë°”êµ¬ë‹ˆ</h3>
                        <div id="cartItems" class="text-sm text-gray-700 space-y-1 h-16 overflow-y-auto">
                            <!-- ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            <p class="text-center text-gray-500 italic pt-2">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.</p>
                        </div>
                        <p id="cartTotal" class="text-right text-base font-bold text-gray-900 mt-2 border-t border-gray-300 pt-2">ì´ì•¡: 0ì›</p>
                    </div>

                    <!-- í¬ì¥/ë°°ë‹¬ ëª¨ë“œ ì„ íƒ -->
                    <div class="mb-6 p-3 bg-white/90 rounded-lg">
                        <label class="block text-sm font-semibold mb-2">í¬ì¥/ë°°ë‹¬ ì˜µì…˜ ì„ íƒ</label>
                        <div class="flex flex-col space-y-3">
                            <label class="flex items-center"><input type="radio" name="order_mode" value="delivery" class="form-radio text-green-500" onchange="updateTakeoutBenefit(false)" checked><span class="ml-2 font-medium">ë°°ë‹¬ (Delivery)</span></label>
                            <label class="flex items-center"><input type="radio" name="order_mode" value="takeout" class="form-radio text-yellow-500" onchange="updateTakeoutBenefit(true)"><span class="ml-2 font-medium">í¬ì¥/ìˆ˜ë ¹ (Takeout)</span></label>
                            <label class="flex items-center"><input type="radio" name="order_mode" value="reservation" class="form-radio text-red-500" onchange="updateTakeoutBenefit(false)"><span class="ml-2 font-medium">í…Œì´ë¸” ì˜ˆì•½ (Reservation)</span></label>
                        </div>
                    </div>

                    <!-- í…Œì´í¬ ì•„ì›ƒ í˜œíƒ í‘œì‹œ ì˜ì—­ (Takeout Benefit) -->
                    <div id="takeoutBenefit" class="hidden mb-6 p-4 bg-yellow-600/90 rounded-xl text-gray-900 text-center transition duration-300">
                        <p class="text-xl font-bold">ğŸ Takeout ê³ ê° íŠ¹ë³„ í˜œíƒ!</p>
                        <p class="text-lg mt-1 font-semibold">ì „ì²´ ê¸ˆì•¡ì˜ <span class="text-red-800">10% ì¦‰ì‹œ í• ì¸</span> ì œê³µ!</p>
                    </div>
                    
                    <h3 class="text-xl font-bold mb-3 text-gray-900">í…Œì´ë¸” ì˜ˆì•½</h3>
                    <form id="reservationForm" class="space-y-4" onsubmit="handleReservation(event)">
                        
                        <div><label for="res_date" class="block text-sm font-medium mb-1">ë‚ ì§œ ì„ íƒ</label><input type="date" id="res_date" class="w-full p-2 rounded-lg border border-gray-300 focus:ring-orange-500 focus:border-orange-500" required></div>
                        
                        <!-- ì˜ˆì•½ ì¸ì›ìˆ˜ -->
                        <div>
                             <label for="res_people" class="block text-sm font-medium mb-1">ì˜ˆì•½ ì¸ì›</label>
                            <select id="res_people" class="w-full p-2 rounded-lg border border-gray-300 focus:ring-orange-500 focus:border-orange-500 text-gray-900" onchange="updateDepositSection()" required>
                                <option value="" disabled selected>ì„ íƒ</option>
                                <option value="1">1ëª…</option>
                                <option value="2">2ëª…</option>
                                <option value="3">3ëª…</option>
                                <option value="4">4ëª…</option>
                                <option value="5">5ëª…</option>
                                <option value="6+">6ëª… ì´ìƒ</option>
                            </select>
                        </div>

                        <!-- ì¢Œì„ íƒ€ì… ì„ íƒ (v7 ì¶”ê°€) -->
                        <div id="seatTypeSelection" class="space-y-3 hidden">
                            <h4 class="block text-sm font-bold pt-2 text-gray-900">âœ¨ ì¢Œì„ íƒ€ì… ì„ íƒ (í”„ë¦¬ë¯¸ì—„ ì˜µì…˜)</h4>
                            <div class="grid grid-cols-2 gap-2">
                                <!-- ë°”ë‹¤ë·° ì°½ê°€ í…Œì´ë¸” (P1) -->
                                <div id="seat-p1" class="seat-card p-3 rounded-lg bg-white/70 hover:bg-white/90 transition shadow-md"
                                     onclick="selectSeatType('P1')">
                                    <p class="font-semibold text-gray-900">P1. ë°”ë‹¤ë·° ì°½ê°€</p>
                                    <p class="text-xs text-red-600 font-bold">+10,000ì›/ì¸ ë³´ì¦ê¸ˆ</p>
                                </div>
                                <!-- ì˜¤ë¶“í•œ í”„ë¼ì´ë¹— ë£¸ (P2) -->
                                <div id="seat-p2" class="seat-card p-3 rounded-lg bg-white/70 hover:bg-white/90 transition shadow-md"
                                     onclick="selectSeatType('P2')">
                                    <p class="font-semibold text-gray-900">P2. í”„ë¼ì´ë¹— ë£¸</p>
                                    <p class="text-xs text-red-600 font-bold">ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡/ë£¸ ì°¨ì§€</p>
                                </div>
                                <!-- ë„ì‹œ ì•¼ê²½ í…Œì´ë¸” (P3) -->
                                <div id="seat-p3" class="seat-card p-3 rounded-lg bg-white/70 hover:bg-white/90 transition shadow-md"
                                     onclick="selectSeatType('P3')">
                                    <p class="font-semibold text-gray-900">P3. ë„ì‹œ ì•¼ê²½</p>
                                    <p class="text-xs text-gray-600">ì¼ë°˜ ë³´ì¦ê¸ˆ</p>
                                </div>
                                <!-- ì¼ë°˜ ë‹¤ì´ë‹ í™€ (G) -->
                                <div id="seat-g" class="seat-card selected p-3 rounded-lg bg-white/90 transition shadow-md"
                                     onclick="selectSeatType('G')">
                                    <p class="font-semibold text-gray-900">G. ì¼ë°˜ í™€</p>
                                    <p class="text-xs text-gray-600">ê°€ì¥ ë¹ ë¥¸ ì˜ˆì•½</p>
                                </div>
                            </div>
                            <input type="hidden" id="seat_type" value="G">
                        </div>
                        
                        <!-- ë°©ë¬¸ ëª©ì  ì„ íƒ (v7 ì¶”ê°€) -->
                        <div id="purposeSelection" class="space-y-3 hidden">
                            <label for="visit_purpose" class="block text-sm font-bold pt-2 text-gray-900">ğŸŒŸ ë°©ë¬¸ ëª©ì </label>
                            <select id="visit_purpose" class="w-full p-2 rounded-lg border border-gray-300 focus:ring-orange-500 focus:border-orange-500 text-gray-900">
                                <option value="none" selected>ëª©ì  ì„ íƒ ì•ˆ í•¨</option>
                                <option value="anniversary">ê¸°ë…ì¼ (ì¶•í•˜ ì¹´ë“œ & ë””ì €íŠ¸ í”Œë ˆì´íŒ…)</option>
                                <option value="business">ë¹„ì¦ˆë‹ˆìŠ¤ (ì¡°ìš©í•œ ì¢Œì„ & ì™€ì´íŒŒì´ ì•ˆë‚´)</option>
                                <option value="other_event">ê¸°íƒ€ íŠ¹ë³„ ì´ë²¤íŠ¸ (í”„ëŸ¬í¬ì¦ˆ, ë¶ˆê½ƒ ì¶•ì œ ë“±)</option>
                            </select>
                        </div>

                        <!-- ë³´ì¦ê¸ˆ ê²°ì œ ì„¹ì…˜ (Plus Alpha v6/v7) -->
                        <div id="depositSection" class="p-4 bg-red-100/50 rounded-lg border border-red-500 hidden transition duration-300">
                            <h4 class="text-lg font-bold text-red-800 mb-2 flex items-center">
                                <span class="mr-2">ğŸ”’ ë…¸ì‡¼ ë°©ì§€ ë³´ì¦ê¸ˆ (í•„ìˆ˜)</span>
                                <span id="seatFeeInfo" class="text-xs font-medium text-red-600 ml-2"></span>
                            </h4>
                            <p id="depositAmount" class="text-xl font-extrabold text-red-800 mb-2"></p>
                            <p class="text-sm text-red-700">
                                * ì˜ˆì•½ ì‹œê°„ 24ì‹œê°„ ì „ê¹Œì§€ ì·¨ì†Œ ì‹œ ì „ì•¡ í™˜ë¶ˆë©ë‹ˆë‹¤. ì´í›„ ì·¨ì†Œ/ë…¸ì‡¼ ì‹œ í™˜ë¶ˆ ë¶ˆê°€.
                            </p>
                        </div>
                        
                        <!-- ì•Œë ˆë¥´ê¸°/ìš”ì²­ ì‚¬í•­ -->
                        <div>
                            <label for="res_requests" class="block text-sm font-medium mb-1">ì•Œë ˆë¥´ê¸° ë° ìš”ì²­ ì‚¬í•­</label>
                            <textarea id="res_requests" rows="2" class="w-full p-2 rounded-lg border border-gray-300 focus:ring-orange-500 focus:border-orange-500 text-gray-900" placeholder="ì˜ˆ: ê²¬ê³¼ë¥˜ ì•Œë ˆë¥´ê¸°, ì¡°ìš©í•œ ì¢Œì„ ìš”ì²­, ê¸°íƒ€ ì´ë²¤íŠ¸ ìš”ì²­ì‚¬í•­"></textarea>
                        </div>

                        <button type="submit" class="w-full py-3 mt-4 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition shadow-lg">
                            <span id="submitButtonText">ë³´ì¦ê¸ˆ ê²°ì œ ë° ì˜ˆì•½ í™•ì •</span>
                        </button>
                    </form>
                    
                    <!-- ë‹¨ê³¨ ê³ ê° ì¿ í° -->
                    <div class="mt-6 p-4 bg-orange-700/80 rounded-xl text-white text-center border-2 border-white/50">
                        <p class="text-lg font-bold">ğŸ‰ ë‹¨ê³¨ ê³ ê° í˜œíƒ</p>
                        <p class="text-sm mt-1">ì¬ë°©ë¬¸ 3íšŒ ë‹¬ì„±! ì‹œê·¸ë‹ˆì²˜ ìŒë£Œ 1ì” ë¬´ë£Œ ì¿ í° ì§€ê¸‰!</p>
                    </div>
                </div>
            </aside>
        </main>

        <!-- 5. 360ë„ ë§¤ì¥ ë¯¸ë¦¬ë³´ê¸° (Placeholder) -->
        <section class="p-4 sm:p-10">
            <h2 class="text-3xl font-bold mb-4 text-sky-400">ğŸŒ 360ë„ ë§¤ì¥ ë¯¸ë¦¬ë³´ê¸°</h2>
            <div class="h-64 rounded-xl flex items-center justify-center text-xl font-bold text-gray-400 bg-gray-800">
                [360ë„ VR ë§¤ì¥ ë¯¸ë¦¬ë³´ê¸° ì˜ìƒ/ì‚¬ì§„ Placeholder]
            </div>
        </section>
        
        <!-- í‘¸í„° -->
        <footer class="p-6 text-center text-gray-500 border-t border-gray-800 mt-8">
            <p>&copy; 2025 Mango Heaven. íŠ¸ë¡œí”¼ì»¬ ë‹¤ì´ë‹ í¬í„¸ ë°ëª¨ í˜ì´ì§€.</p>
        </footer>
    </div>

    <!-- ë©”ë‰´ ìƒì„¸ ì •ë³´ ëª¨ë‹¬ (ì´ì „ ë²„ì „ê³¼ ë™ì¼) -->
    <div id="menuDetailModal" class="modal">
        <div class="modal-content bg-gray-900 rounded-3xl p-6 sm:p-8 shadow-2xl">
            <div class="flex justify-between items-start mb-4">
                <h2 id="modalMenuName" class="text-4xl font-extrabold text-yellow-400">ë©”ë‰´ ì´ë¦„</h2>
                <button onclick="closeMenuDetailModal()" class="text-gray-400 hover:text-white text-3xl leading-none">&times;</button>
            </div>
            
            <img id="modalMenuImage" src="" alt="ë©”ë‰´ ì´ë¯¸ì§€" class="w-full h-64 object-cover rounded-xl mb-6 shadow-xl">
            
            <p id="modalMenuPrice" class="text-3xl font-bold text-orange-400 mb-4"></p>
            
            <div class="space-y-4">
                <div>
                    <h3 class="text-xl font-semibold mb-1 text-white border-b border-gray-700 pb-1">ìƒì„¸ ì„¤ëª… (Chef's Note)</h3>
                    <p id="modalMenuDescription" class="text-gray-300 leading-relaxed"></p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-1 text-white border-b border-gray-700 pb-1">ì£¼ìš” ì¬ë£Œ</h3>
                    <p id="modalMenuIngredients" class="text-gray-300"></p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-1 text-red-400 border-b border-gray-700 pb-1">ì•Œë ˆë¥´ê¸° ì •ë³´</h3>
                    <p id="modalMenuAllergy" class="text-red-300 font-medium"></p>
                </div>
            </div>

            <button id="modalAddToCartBtn" class="w-full py-3 mt-8 bg-yellow-500 text-gray-900 font-bold rounded-xl hover:bg-yellow-600 transition shadow-lg text-lg">
                ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸°
            </button>
        </div>
    </div>

    <script>
        // ì „ì—­ ìƒíƒœ ë³€ìˆ˜ ë° ìƒìˆ˜
        let isLiked = false;
        let cart = []; // { id: 'taco', name: 'ë§ê³  ì‰¬ë¦¼í”„ íƒ€ì½”', price: 22000, quantity: 1 }
        
        // ì¢Œì„ íƒ€ì…ë³„ 1ì¸ë‹¹ ì¶”ê°€ ë³´ì¦ê¸ˆ (ê¸°ë³¸ 5000ì› + ì¶”ê°€ ê¸ˆì•¡)
        const DEPOSIT_BASE = 5000;
        const SEAT_DEPOSIT = {
            'G': DEPOSIT_BASE,       // ì¼ë°˜ í™€: 5,000ì›
            'P1': DEPOSIT_BASE + 5000, // ë°”ë‹¤ë·° ì°½ê°€: 10,000ì›
            'P2': DEPOSIT_BASE,      // í”„ë¼ì´ë¹— ë£¸: ìµœì†Œ ì¸ì›/ê¸ˆì•¡ ì •ì±…ìœ¼ë¡œ ì¸í•´ ì¼ë°˜ ë³´ì¦ê¸ˆ ì‚¬ìš© (ì‹¤ì œëŠ” ë£¸ ì°¨ì§€)
            'P3': DEPOSIT_BASE       // ë„ì‹œ ì•¼ê²½: 5,000ì›
        };
        const SEAT_NAME = {
            'G': 'ì¼ë°˜ í™€',
            'P1': 'ë°”ë‹¤ë·° ì°½ê°€ í…Œì´ë¸”',
            'P2': 'ì˜¤ë¶“í•œ í”„ë¼ì´ë¹— ë£¸',
            'P3': 'ë„ì‹œ ì•¼ê²½ í…Œì´ë¸”'
        };

        // ë©”ë‰´ ë°ì´í„° ì •ì˜ (ì´ì „ ë²„ì „ê³¼ ë™ì¼)
        const menuData = {
            taco: { name: "ë§ê³  ì‰¬ë¦¼í”„ íƒ€ì½”", price: 22000, displayPrice: "22,000ì›", description: "ì‹ ì„ í•œ ë§ê³  ì‚´ì‚¬ì™€ ì¹ ë¦¬ ì‰¬ë¦¼í”„...", ingredients: "ë§ê³ , ì¹ ë¦¬ ìƒˆìš°, ì˜¥ìˆ˜ìˆ˜ í† ë¥´í‹°ì•¼, ë¼ì„, ê³ ìˆ˜ (Cilantro).", allergy: "ìƒˆìš°, ê¸€ë£¨í… í¬í•¨.", image: "https://placehold.co/700x400/f59e0b/000000?text=Mango+Taco+Detail", id: 'taco' },
            noodle: { name: "ì•„ë³´ì¹´ë„ í¬ë¦¼ ëˆ„ë“¤", price: 25000, displayPrice: "25,000ì›", description: "ìƒ ì•„ë³´ì¹´ë„ë¥¼ ê°ˆì•„ ë„£ì€ íŠ¹ì œ í¬ë¦¼ ì†ŒìŠ¤ì™€ ì«„ê¹ƒí•œ ìƒë©´ íŒŒìŠ¤íƒ€...", ingredients: "ì•„ë³´ì¹´ë„, ìƒë©´ íŒŒìŠ¤íƒ€, ìƒí¬ë¦¼, ì£, ë£¨ê¼´ë¼.", allergy: "ìš°ìœ (ìœ ì œí’ˆ), ê²¬ê³¼ë¥˜(ì£), ë°€(ê¸€ë£¨í…) í¬í•¨.", image: "https://placehold.co/700x400/10b981/ffffff?text=Avocado+Noodle+Detail", id: 'noodle' },
            rice: { name: "íŒŒì¸ì• í”Œ íŠ¸ë¡œí”¼ì»¬ ë¼ì´ìŠ¤", price: 18000, displayPrice: "18,000ì›", description: "ì˜ ìµì€ íŒŒì¸ì• í”Œ ì†ì— ë‹´ì•„ë‚¸ ë§¤ì½¤í•˜ë©´ì„œë„ ë‹¬ì½¤í•œ ë³¶ìŒë°¥...", ingredients: "íŒŒì¸ì• í”Œ, ìŒ€, ê³„ë€, ì±„ì†Œ, íŠ¹ì œ ì†ŒìŠ¤.", allergy: "ê³„ë€ í¬í•¨.", image: "https://placehold.co/700x400/ef4444/ffffff?text=Pineapple+Rice+Detail", id: 'rice' }
        };
        
        // ê°€ê²© í¬ë§· í—¬í¼
        const formatPrice = (price) => price.toLocaleString('ko-KR') + 'ì›';

        // ì°œí•˜ê¸° ë²„íŠ¼ í† ê¸€ ê¸°ëŠ¥
        function toggleLike() {
            const likeButton = document.getElementById('likeButton');
            isLiked = !isLiked;

            if (isLiked) {
                likeButton.classList.add('liked');
                showCustomModal("â¤ï¸ Mango Heavenì„ ì°œ ëª©ë¡ì— ì¶”ê°€í–ˆìŠµë‹ˆë‹¤!");
            } else {
                likeButton.classList.remove('liked');
                showCustomModal("ğŸ’” Mango Heavenì„ ì°œ ëª©ë¡ì—ì„œ ì œì™¸í–ˆìŠµë‹ˆë‹¤.");
            }
        }

        // ë©”ë‰´ ìƒì„¸ ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸° (ì´ì „ ë²„ì „ê³¼ ë™ì¼)
        function showMenuDetail(menuId) {
            const data = menuData[menuId];
            if (!data) return;

            document.getElementById('modalMenuName').textContent = data.name;
            document.getElementById('modalMenuPrice').textContent = data.displayPrice;
            document.getElementById('modalMenuDescription').textContent = data.description;
            document.getElementById('modalMenuIngredients').textContent = data.ingredients;
            document.getElementById('modalMenuAllergy').textContent = data.allergy;
            document.getElementById('modalMenuImage').src = data.image;
            
            document.getElementById('modalAddToCartBtn').onclick = () => {
                addToCart(data.id);
                closeMenuDetailModal();
            };

            document.getElementById('menuDetailModal').style.display = 'flex';
        }

        function closeMenuDetailModal() {
            document.getElementById('menuDetailModal').style.display = 'none';
        }

        // ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸° (ì´ì „ ë²„ì „ê³¼ ë™ì¼)
        function addToCart(menuId) {
            const data = menuData[menuId];
            if (!data) return;

            const existingItem = cart.find(item => item.id === menuId);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id: data.id, name: data.name, price: data.price, quantity: 1 });
            }

            updateCartDisplay();
            showCustomModal(`âœ… "${data.name}" ${existingItem ? '1ê°œ ì¶”ê°€' : 'ì¶”ê°€'}! (ì´ ${existingItem ? existingItem.quantity : 1}ê°œ)`);
        }

        // ì¥ë°”êµ¬ë‹ˆ UI ì—…ë°ì´íŠ¸ (ì´ì „ ë²„ì „ê³¼ ë™ì¼)
        function updateCartDisplay() {
            const cartItemsContainer = document.getElementById('cartItems');
            const cartTotalElement = document.getElementById('cartTotal');
            let total = 0;
            let html = '';

            if (cart.length === 0) {
                html = '<p class="text-center text-gray-500 italic pt-2">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.</p>';
                total = 0;
            } else {
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    html += `
                        <div class="flex justify-between items-center">
                            <span class="truncate pr-2">${item.name} (${item.quantity}ê°œ)</span>
                            <span class="font-semibold text-right">${formatPrice(itemTotal)}</span>
                        </div>
                    `;
                });
            }

            cartItemsContainer.innerHTML = html;
            cartTotalElement.textContent = `ì´ì•¡: ${formatPrice(total)}`;
        }

        // ì¢Œì„ íƒ€ì… ì„ íƒ í•¸ë“¤ëŸ¬ (v7 ì¶”ê°€)
        function selectSeatType(selectedType) {
            const seatCards = document.querySelectorAll('.seat-card');
            seatCards.forEach(card => card.classList.remove('selected'));
            document.getElementById(`seat-${selectedType.toLowerCase()}`).classList.add('selected');
            document.getElementById('seat_type').value = selectedType;
            
            updateDepositSection(); // ì¢Œì„ íƒ€ì… ë³€ê²½ ì‹œ ë³´ì¦ê¸ˆ ì¬ê³„ì‚°
        }
        
        // ë³´ì¦ê¸ˆ ê²°ì œ ì„¹ì…˜ ì—…ë°ì´íŠ¸ ë° UI ì „í™˜ (v7)
        function updateDepositSection() {
            const orderMode = document.querySelector('input[name="order_mode"]:checked').value;
            const depositSection = document.getElementById('depositSection');
            const seatTypeSelection = document.getElementById('seatTypeSelection');
            const purposeSelection = document.getElementById('purposeSelection');
            const submitButton = document.getElementById('submitButtonText');
            const depositAmountElement = document.getElementById('depositAmount');
            const seatFeeInfoElement = document.getElementById('seatFeeInfo');
            const peopleSelect = document.getElementById('res_people');
            
            // ì¸ì›ìˆ˜, ì¢Œì„ íƒ€ì… ê°€ì ¸ì˜¤ê¸°
            const selectedPeopleText = peopleSelect.value;
            const selectedSeatType = document.getElementById('seat_type').value;

            // ì¸ì›ìˆ˜ë¥¼ ìˆ«ìë¡œ ë³€í™˜ (6+ëŠ” 6ìœ¼ë¡œ ê°€ì •)
            let peopleCount = 0;

            if (selectedPeopleText === '6+') {
                peopleCount = 6; 
            } else if (selectedPeopleText && !isNaN(parseInt(selectedPeopleText))) {
                peopleCount = parseInt(selectedPeopleText);
            }
            
            // ì˜ˆì•½ ëª¨ë“œì¼ ë•Œë§Œ ì¢Œì„/ëª©ì  ë° ë³´ì¦ê¸ˆ ì„¹ì…˜ í‘œì‹œ
            if (orderMode === 'reservation') {
                seatTypeSelection.classList.remove('hidden');
                purposeSelection.classList.remove('hidden');
                depositSection.classList.remove('hidden');
                submitButton.textContent = 'ë³´ì¦ê¸ˆ ê²°ì œ ë° ì˜ˆì•½ í™•ì •';

                // ë³´ì¦ê¸ˆ ê³„ì‚°
                const depositPerPerson = SEAT_DEPOSIT[selectedSeatType] || DEPOSIT_BASE;
                const depositAmount = peopleCount * depositPerPerson;

                depositAmountElement.textContent = `${SEAT_NAME[selectedSeatType]} / ${peopleCount}ì¸ ê¸°ì¤€ ë³´ì¦ê¸ˆ: ${formatPrice(depositAmount)}`;

                // ì¢Œì„ë³„ ì¶”ê°€ ë¹„ìš© ì•ˆë‚´
                if (selectedSeatType === 'P1') {
                     seatFeeInfoElement.textContent = `(ë°”ë‹¤ë·° í”„ë¦¬ë¯¸ì—„: 1ì¸ë‹¹ +${formatPrice(depositPerPerson - DEPOSIT_BASE)})`;
                } else if (selectedSeatType === 'P2') {
                     seatFeeInfoElement.textContent = `(í”„ë¼ì´ë¹— ë£¸: ìµœì†Œ 6ì¸ ì´ìƒ ë° ìµœì†Œ ì£¼ë¬¸ ê¸ˆì•¡ ì ìš©)`;
                } else {
                    seatFeeInfoElement.textContent = '';
                }

            } else {
                seatTypeSelection.classList.add('hidden');
                purposeSelection.classList.add('hidden');
                depositSection.classList.add('hidden');
                
                // ì£¼ë¬¸ ëª¨ë“œì— ë”°ë¥¸ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
                if ((orderMode === 'takeout' || orderMode === 'delivery') && cart.length > 0) {
                     submitButton.textContent = orderMode === 'takeout' ? 'í• ì¸ ì ìš© í›„ í¬ì¥ ì£¼ë¬¸' : 'ë°°ë‹¬ ì£¼ë¬¸ í™•ì¸';
                } else {
                     submitButton.textContent = 'ì˜ˆì•½/ì£¼ë¬¸ í™•ì¸';
                }
            }
        }
        
        // í¬ì¥/ë°°ë‹¬/ì˜ˆì•½ ëª¨ë“œ ë³€ê²½ ì‹œ UI ì—…ë°ì´íŠ¸
        function updateTakeoutBenefit(isTakeout) {
            const benefitDiv = document.getElementById('takeoutBenefit');
            
            if (isTakeout) {
                benefitDiv.classList.remove('hidden');
                benefitDiv.classList.add('flex', 'flex-col');
            } else {
                benefitDiv.classList.add('hidden');
                benefitDiv.classList.remove('flex', 'flex-col');
            }
            
            updateDepositSection(); // ëª¨ë“œ ë³€ê²½ ì‹œ ë³´ì¦ê¸ˆ/ì¢Œì„ ì„¹ì…˜ë„ ì—…ë°ì´íŠ¸
        }
        
        // ì˜ˆì•½/ì£¼ë¬¸ í™•ì¸ ì‹œ ìœ íš¨ì„± ê²€ì‚¬ ë° ì•Œë¦¼
        function handleReservation(event) {
            event.preventDefault(); // í¼ ì œì¶œ ë§‰ê¸°
            
            const date = document.getElementById('res_date').value;
            const people = document.getElementById('res_people').value;
            const requests = document.getElementById('res_requests').value;
            const orderMode = document.querySelector('input[name="order_mode"]:checked').value;
            
            // í•„ìˆ˜ ì…ë ¥ í•„ë“œ ê²€ì‚¬
            if (!date || !people) {
                showCustomModal("âš ï¸ ë‚ ì§œì™€ ì˜ˆì•½ ì¸ì›ì€ í•„ìˆ˜ ì„ íƒ í•­ëª©ì…ë‹ˆë‹¤.");
                return;
            }

            let message = '';

            if (orderMode === 'reservation') {
                // í…Œì´ë¸” ì˜ˆì•½ ì‹œ ë³´ì¦ê¸ˆ ê²°ì œ ì‹œë®¬ë ˆì´ì…˜
                const selectedSeatType = document.getElementById('seat_type').value;
                const selectedPurpose = document.getElementById('visit_purpose').value;
                
                const peopleCount = people === '6+' ? 6 : parseInt(people);
                const depositPerPerson = SEAT_DEPOSIT[selectedSeatType] || DEPOSIT_BASE;
                const depositAmount = peopleCount * depositPerPerson;
                const seatName = SEAT_NAME[selectedSeatType];
                const purposeName = document.querySelector(`#visit_purpose option[value="${selectedPurpose}"]`).textContent.split(' ')[0];


                message = `âœ… í…Œì´ë¸” ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! (ë³´ì¦ê¸ˆ ê²°ì œ ì™„ë£Œ)\n\n` +
                          `ì˜ˆì•½ ì •ë³´:\n` +
                          `  - ë‚ ì§œ: ${date}, ì¸ì›: ${people}, ì¢Œì„: ${seatName}\n` +
                          `  - ë°©ë¬¸ ëª©ì : ${purposeName}\n` +
                          `  - ìš”ì²­ ì‚¬í•­: ${requests || 'ì—†ìŒ'}\n` +
                          `  - ë³´ì¦ê¸ˆ: ${formatPrice(depositAmount)} (ê²°ì œ ì™„ë£Œ)\n\n` +
                          `[ë…¸ì‡¼ ë°©ì§€ ì •ì±…] 24ì‹œê°„ ì „ê¹Œì§€ ì·¨ì†Œ ì‹œ ë³´ì¦ê¸ˆ ì „ì•¡ í™˜ë¶ˆë©ë‹ˆë‹¤.`;

            } else if (orderMode === 'takeout' && cart.length > 0) {
                // í¬ì¥ ì£¼ë¬¸ ë° ì¥ë°”êµ¬ë‹ˆ ìˆìŒ
                const discountRate = 0.1;
                const totalBeforeDiscount = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                const discountAmount = totalBeforeDiscount * discountRate;
                const totalAfterDiscount = totalBeforeDiscount - discountAmount;
                
                message = `âœ… í¬ì¥ ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! (í• ì¸ ì ìš©)\n\n` +
                          `ì´ ì£¼ë¬¸ ê¸ˆì•¡: ${formatPrice(totalBeforeDiscount)}\n` +
                          `í• ì¸ ê¸ˆì•¡ (10%): ${formatPrice(discountAmount)}\n` +
                          `ìµœì¢… ê²°ì œ ê¸ˆì•¡: ${formatPrice(totalAfterDiscount)}\n\n` +
                          `ì„ íƒ ë©”ë‰´ ${cart.length}ì¢…ì´ ì¤€ë¹„ë  ì˜ˆì •ì…ë‹ˆë‹¤.`;
            
            } else if ((orderMode === 'takeout' || orderMode === 'delivery') && cart.length === 0) {
                 // í¬ì¥/ë°°ë‹¬ ì£¼ë¬¸ì´ì§€ë§Œ ì¥ë°”êµ¬ë‹ˆ ë¹„ì–´ìˆìŒ
                 message = `âš ï¸ ì£¼ë¬¸ì„ ìœ„í•´ ì¥ë°”êµ¬ë‹ˆì— ë©”ë‰´ë¥¼ ë‹´ì•„ì£¼ì„¸ìš”!`;
                 
            } else {
                // ë°°ë‹¬ ì£¼ë¬¸
                const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                message = `âœ… ë°°ë‹¬ ì£¼ë¬¸ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n` +
                          `ì´ ê²°ì œ ê¸ˆì•¡: ${formatPrice(total)}\n` +
                          `ë°°ë‹¬ ì£¼ì†Œ: [ì£¼ì†Œ ì…ë ¥ Placeholder]\n\n` +
                          `ì„ íƒ ë©”ë‰´ ${cart.length}ì¢…ì´ ë°°ë‹¬ë  ì˜ˆì •ì…ë‹ˆë‹¤.`;
            }

            showCustomModal(message);
        }

        // Custom Modal (alert() ëŒ€ì²´ - ì´ì „ ë²„ì „ê³¼ ë™ì¼)
        function showCustomModal(message) {
            const modalId = 'customAlertModal';
            let modal = document.getElementById(modalId);
            if (!modal) {
                modal = document.createElement('div');
                modal.id = modalId;
                modal.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 transition-opacity duration-300 opacity-0';
                modal.innerHTML = `
                    <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border border-yellow-500/50 transform scale-95 transition-transform duration-300 w-full max-w-sm">
                        <h4 class="text-2xl font-bold mb-3 text-yellow-400">ì•Œë¦¼</h4>
                        <p id="modalMessage" class="text-white mb-4 whitespace-pre-wrap"></p>
                        <button onclick="closeCustomModal('${modalId}')" class="w-full py-2 bg-yellow-500 text-gray-900 font-bold rounded-lg hover:bg-yellow-600 transition">í™•ì¸</button>
                    </div>
                `;
                document.body.appendChild(modal);
                setTimeout(() => {
                    modal.classList.add('opacity-100');
                    modal.querySelector('.bg-gray-800').classList.remove('scale-95');
                }, 10);
            }
            document.getElementById('modalMessage').textContent = message;
            modal.style.display = 'flex';
        }

        function closeCustomModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('opacity-100');
                modal.querySelector('.bg-gray-800').classList.add('scale-95');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }
        
        // ì´ˆê¸° ë‚ ì§œ ì„¤ì • ë° ìƒíƒœ ì´ˆê¸°í™”
        window.onload = () => {
             const today = new Date();
             const yyyy = today.getFullYear();
             const mm = String(today.getMonth() + 1).padStart(2, '0');
             const dd = String(today.getDate()).padStart(2, '0');
             document.getElementById('res_date').value = `${yyyy}-${mm}-${dd}`;
             
             // ì¸ì›ìˆ˜ ë³€ê²½ ì‹œ ë³´ì¦ê¸ˆ ì—…ë°ì´íŠ¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
             document.getElementById('res_people').addEventListener('change', updateDepositSection);

             // ì´ˆê¸° ë¡œë“œ ì‹œ ì£¼ë¬¸ ëª¨ë“œì— ë”°ë¥¸ UI ì—…ë°ì´íŠ¸
             const initialMode = document.querySelector('input[name="order_mode"]:checked').value;
             updateTakeoutBenefit(initialMode === 'takeout'); // í˜œíƒ UI ì—…ë°ì´íŠ¸
             updateDepositSection(); // ë³´ì¦ê¸ˆ/ì¢Œì„ UI ì—…ë°ì´íŠ¸
             updateCartDisplay(); // ì¥ë°”êµ¬ë‹ˆ ì´ˆê¸°í™”
        };

    </script>
</body>
</html>